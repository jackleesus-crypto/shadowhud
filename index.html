<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Shadow HUD</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0a0a0a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="style.css"/>
</head>
<body class="app">
  <header class="appbar">
    <button id="btn-gear" class="icon">⚙︎</button>
    <div id="appbar-title">Character</div>
    <button id="btn-plus" class="icon">＋</button>
  </header>

  <main class="content">
    <!-- CHARACTER -->
    <section id="screen-character" class="screen visible">
      <div class="row-top">
        <div class="pill">💰 <span id="gold">0</span> Gold</div>
        <div class="pill">⭐ Unspent AP: <span id="ap">0</span></div>
      </div>
      <div class="card level-card">
        <div class="lvl-left">
          <div id="rank-badge" class="rank-badge">E</div>
          <div>
            <div class="lvl-title">Level <span id="level-num">1</span></div>
            <div class="lvl-sub">Rank <span id="rank-text">E</span></div>
          </div>
        </div>
        <div class="lvl-right">
          <div class="lvl-bar"><div id="xp-fill"></div></div>
          <div class="lvl-xp"><span id="xp-cur">0</span>/<span id="xp-next">0</span> XP</div>
        </div>
      </div>

      <div class="section-title">
        <div class="title-left"><div class="hex">⬡</div>
          <div><div class="h1">Attributes</div><div class="hint">Tap + to spend AP on a stat.</div></div>
        </div>
      </div>
      <div class="grid-3" id="attr-grid"></div>

      <div class="card radar-card">
        <canvas id="radar" width="320" height="220"></canvas>
      </div>
    </section>

    <!-- QUESTS -->
    <section id="screen-quests" class="screen">
      <div class="section-header">
        <div class="h1">Quests</div>
      </div>
      <div class="filters-row">
        <button class="chip active" data-filter="all">All</button>
        <button class="chip" data-filter="daily">Daily</button>
        <button class="chip" data-filter="penalty">Penalty</button>
        <button class="chip" data-filter="active">Active</button>
        <button class="chip" data-filter="completed">Done</button>
        <button class="chip" data-filter="expired">Expired</button>
      </div>
      <div id="quest-list" class="list"></div>
      <div id="empty-note" class="empty">No quests yet. Tap ＋ to create one.</div>
    </section>

    <!-- CREATE / EDIT QUEST -->
    <section id="screen-create" class="screen">
      <div class="section-title"><div class="h1">New Quest</div></div>
      <form id="quest-form" class="card form" autocomplete="off">
        <label>Title <input id="q-title" required></label>
        <label>Description <input id="q-desc" placeholder="Optional"></label>
        <label>Type
          <select id="q-type">
            <option value="timer">Timer</option>
            <option value="counter">Counter</option>
            <option value="checklist">Checklist</option>
          </select>
        </label>
        <div class="if timer"><label>Duration (minutes) <input id="q-duration" type="number" min="1" value="30"></label></div>
        <div class="if counter"><label>Target Count <input id="q-target" type="number" min="1" value="10"></label></div>
        <div class="if checklist"><label>Checklist (comma separated) <input id="q-items" placeholder="Warm up, Run 2km, Stretch"></label></div>
        <label>Difficulty
          <select id="q-diff">
            <option value="easy">Easy</option>
            <option value="normal" selected>Normal</option>
            <option value="hard">Hard</option>
            <option value="elite">Elite</option>
            <option value="boss">Boss</option>
          </select>
        </label>
        <label>Deadline <input id="q-deadline" type="datetime-local"></label>
        <label>Repeat
          <select id="q-repeat">
            <option value="none">None</option>
            <option value="daily">Daily</option>
            <option value="weekly">Weekly</option>
          </select>
        </label>
        <label>Base Reward XP <input id="q-xp" type="number" min="0" value="25"></label>
        <label>Notify before deadline (minutes) <input id="q-remind" type="number" min="0" value="10"></label>
        <div class="form-actions">
          <button type="submit" class="btn primary">Save</button>
          <button type="button" id="btn-cancel" class="btn">Cancel</button>
        </div>
      </form>
      <div class="card tiny hint">Timer quests have a Start button. Dailies/Penalties show badges at the top-right.</div>
    </section>

    <!-- STORE -->
    <section id="screen-store" class="screen">
      <div class="section-title"><div class="h1">Store</div></div>
      <div class="row-top">
        <div class="pill">💰 <span id="gold2">0</span> Gold</div>
        <button id="btn-add-reward" class="btn small">＋ New Reward</button>
      </div>
      <div id="shop-list" class="list"></div>
      <div id="shop-empty" class="empty">No rewards yet. Add your own!</div>

      <form id="reward-form" class="card form hidden">
        <div class="h1" style="margin:0 0 6px 0;">New Reward</div>
        <label>Title <input id="r-title" required></label>
        <label>Description <input id="r-desc" placeholder="Optional"></label>
        <label>Cost (Gold) <input id="r-cost" type="number" min="1" value="50"></label>
        <div class="form-actions">
          <button class="btn primary" type="submit">Save Reward</button>
          <button class="btn" type="button" id="r-cancel">Cancel</button>
        </div>
      </form>
    </section>

    <!-- FOCUS -->
    <section id="screen-focus" class="screen">
      <div class="section-title"><div class="h1">Focus</div></div>
      <div class="card focus-card">
        <label>Focus length (minutes) <input id="focus-mins" type="number" min="1" value="25"></label>
        <div class="focus-time" id="focus-time">25:00</div>
        <div class="focus-actions">
          <button id="focus-start" class="btn primary">Start</button>
          <button id="focus-pause" class="btn hidden">Pause</button>
          <button id="focus-resume" class="btn hidden">Resume</button>
          <button id="focus-cancel" class="btn">Cancel</button>
        </div>
      </div>
      <div class="hint">While focusing, the rest of the app is locked until the timer ends.</div>
      <div id="lock-overlay" class="lock hidden"><div>🔒 Focus mode active</div></div>
    </section>

    <!-- JOURNEY -->
    <section id="screen-journey" class="screen">
      <div class="section-title"><div class="h1">Journey</div></div>
      <div class="card">
        <div class="q-top"><div>Progress Overview</div></div>
        <div class="metric">Level <span id="j-level"></span></div>
        <div class="bar"><div id="j-xp"></div></div>
        <div class="metric">Quests Completed <span id="j-completed"></span></div>
        <div class="bar"><div id="j-complete-bar"></div></div>
        <div class="metric">Current Streak <span id="j-streak"></span></div>
        <div class="bar"><div id="j-streak-bar"></div></div>
        <div class="metric">Gold Earned <span id="j-gold"></span></div>
      </div>
      <div class="card">
        <div class="q-top"><div>Achievements</div></div>
        <div id="achievements" class="ach-list"></div>
      </div>
    </section>
  </main>

  <nav class="tabs">
    <button id="tab-quests" class="tab"><div>✓</div><span>Quest</span></button>
    <button id="tab-journey" class="tab"><div>🗺️</div><span>Journey</span></button>
    <button id="tab-character" class="tab active"><div>👤</div><span>Character</span></button>
    <button id="tab-store" class="tab"><div>🎁</div><span>Store</span></button>
    <button id="tab-focus" class="tab"><div>⏱</div><span>Focus</span></button>
  </nav>

  <script src="app.js"></script>
  <script>if('serviceWorker' in navigator){navigator.serviceWorker.register('sw.js');}</script>
</body>
</html>
